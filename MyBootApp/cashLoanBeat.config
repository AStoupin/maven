input {
  beats {
    port => 5044
  }
}


filter {

if [system] == "cash-loan-service" {
    grok {
# Log Example
#17:39:24,687 INFO  [stdout] (default task-4) 2017-12-11 17:39:24.687 [default task-4] INFO  [uuid=339162d0-b4b0-11e7-b443-0a5c6a610013] r.c.w.c.e.PendingActionsSender - Trying to send pending action #119 for application with UUID 339162d0-b4b0-11e7-b443-0a5c6a610013.
#17:39:24,688 INFO  [stdout] (default task-4) 2017-12-11 17:39:24.688 [default task-4] INFO  [uuid=339162d0-b4b0-11e7-b443-0a5c6a610013] r.c.w.c.e.PendingActionsSender - Sending status APPROVED for application 339162d0-b4b0-11e7-b443-0a5c6a610013
#17:39:26,209 INFO  [stdout] (default task-5) 2017-12-11 17:39:26.209 [default task-5] INFO  [uuid=] r.c.w.c.LoggingHandler - <soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:stat="http://www.cetelem.ru/services/cash/status"><soapenv:Header/><soapenv:Body>
#17:39:26,210 INFO  [stdout] (default task-5)       <stat:notifyByUuid>
#17:39:26,210 INFO  [stdout] (default task-5)          <uuid>339162d0-b4b0-11e7-b443-0a5c6a610012</uuid>
#17:39:26,210 INFO  [stdout] (default task-5)       </stat:notifyByUuid>
#17:39:26,210 INFO  [stdout] (default task-5)    </soapenv:Body>
#17:39:26,210 INFO  [stdout] (default task-5)    
#17:39:26,210 INFO  [stdout] (default task-5)    </soapenv:Envelope>
#17:39:26,611 INFO  [stdout] (default task-5) 2017-12-11 17:39:26.611 [default task-5] INFO  [uuid=339162d0-b4b0-11e7-b443-0a5c6a610012] r.c.w.c.e.PendingActionEventBus - Checking for pending actions by destination ESB... 

        match => { "message" => "%{NOTSPACE}(%{SPACE})+%{LOGLEVEL}(%{SPACE})+\[%{DATA}\](%{SPACE})+\(%{DATA}\)(%{SPACE})+%{TIMESTAMP_ISO8601:log-timestamp}(%{SPACE})+\[%{DATA:log-pid}\](%{SPACE})+%{LOGLEVEL:log-level}(%{SPACE})+\[(uuid=)%{DATA:log-key}\]%{DATA:log-class} -%{GREEDYDATA:log-message}"}
# Some specific field for each entry
#        add_field => {"log-system"=>"cashloan"}
#        add_field => {"log-env"=>"prod"}

    }
}
else if [system] == "car-loan-service" {
    grok {
# Log Example
#2017-12-12 12:05:02:196 [default task-1] INFO  [uuid=cda42bb3-ba6e-48f3-85b2-d1dcf8431020] a.d.L.request:94 - URL WebService '49'
#2017-12-12 12:05:02:202 [default task-1] INFO  [uuid=cda42bb3-ba6e-48f3-85b2-d1dcf8431020] a.w.c.o.request:128 - http://sdlhs02.jv.ru:8080/ws-logging/logging?wsdl/send
#2017-12-12 12:05:02:203 [default task-1] INFO  [uuid=cda42bb3-ba6e-48f3-85b2-d1dcf8431020] q.w.c.o.request:67 - <soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"><SOAP-ENV:Header xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/"/><soap:Body><ns2:send xmlns:ns2="http://cetelem.ru/services/logging"><arg0><pcPosNumber xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:nil="true"/><pcPropertyFlag xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:nil="true"/><pcId xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:nil="true"/><UUID>cda42bb3-ba6e-48f3-85b2-d1dcf8431020</UUID><POS>200867</POS><login>sboltest</login><numauto>34600054</numauto><card xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:nil="true"/><time>1513069502195</time><type>SDTD</type><stats><key>TYPEPRODUCT</key><value>CL</value></stats><stats><key>EMODE</key><value>P</value></stats><stats><key>TYPEETUDE</key><value>C</value></stats><stats><key>VARDOMAIN</key><value>AGRE</value></stats><numautoYear>2017</numautoYear><operationId xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:nil="true"/><codDossierSouscription xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:nil="true"/><dossierNumber xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:nil="true"/></arg0></ns2:send></soap:Body></soap:Envelope>
#2017-12-12 12:05:02:216 [default task-1] INFO  [uuid=cda42bb3-ba6e-48f3-85b2-d1dcf8431020] q.w.c.o.response:76 - <SOAP-ENV:Envelope xmlns:S="http://schemas.xmlsoap.org/soap/envelope/" xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/"><SOAP-ENV:Header/><SOAP-ENV:Body><ns2:sendResponse xmlns:ns2="http://cetelem.ru/services/logging"><return><UUID>cda42bb3-ba6e-48f3-85b2-d1dcf8431020</UUID><success>true</success></return></ns2:sendResponse></SOAP-ENV:Body></SOAP-ENV:Envelope>

        match => { "message" => "%{TIMESTAMP_ISO8601:log-timestamp}(%{SPACE})+\[%{DATA:log-pid}\](%{SPACE})+%{LOGLEVEL:log-level}(%{SPACE})+\[(uuid=)%{DATA:log-key}\](%{SPACE})+%{DATA:log-class}:%{GREEDYDATA:log-message}"}
# Some specific field for each entry
#        add_field => {"log-system"=>"carloan"}
#        add_field => {"log-env"=>"prod"}

    }
}	
else if [system] == "rux-api" {
    grok {
# Log Example
#2018-05-13 21:00:00.613 INFO  [default task-82] [847e6405-9484-49ca-9a72-0d5f4360334d] com.cetelem.instancesvr.tlmq.client.InstanceSvrClient: V011227108390001008131000310521006RUXNET0523002CL052800100221008201805110529004PL8C05330150000000015000000401015000000000000000053501500000000027510004350150000000000000000437015000000001500000041501500000000027510004160150000000002751000537001N022700372702810030060284003000022800430901019001M0261003990021101020020600930562003FEM0385009Зё±ГВєёЅ°0386007»Оґјё»°0009007NO INFO00100240001610000000000000001000012004ѕАЎ»00140150000048623476120016001R0017008198112280018008іѕА ѕАµ»00190030750020003CNI00210061111110023008ѕѕѕ ї»ОБ0024007NO INFO0026005000000027006јѕБєІ°00290150000092028698080032008201512010033002470041002PR0043004000000480090000000000098003MAL0387008Зё±ГВєёЅ0388006БµАіµ№011200819790924011400307501220050000001250150000000000000000128008000000000129002000139004000001440090000000000181001M048600110183001P018400820120801019201500000000450000001930150000000015000000197015000000004500000019801500000000000000001990150000000000000000200015000000000000000020101500000000000000004430150000000000000000445015000000000000000020201500000000000000002030150000000000000000204015000000000000000020501500000000000000002060150000000000000000490001N0448001N0337001N0384001N0447001N0449001N024500800000000049400100495001004960010049700100441003320032900140745001007460010074700101500001015010030011502003IN01503003RBT1517005000001524005000121528005000001539002001540002001549002051545002001546002001600001016010030001617005000001624005000001628005000001639002001640002001649002001645002001646002001700001017170050000017240050000017280050000017390020017400020017490020017450020017460020018000010181700500000182400500000182800500000183900200184000200184900200184500200184600200275500100588011NET@MAIL.RU03670041624305900800000000306600800000000307300200307900103080015000000000000000308101500000000000000030830080000000030840010308501500000000000000030870080000000030900080000000030920010309301500000000000000030940150000000000000003096008000000003097001030980150000000000000003100008000000003103008000000003105001031060150000000000000003107015000000000000000310900800000000311000103111015000000000000000311300800000000311600800000000311800103119015000000000000000312001500000000000000031220080000000031230010312401500000000000000031260080000000031290080000000031310010313201500000000000000031330150000000000000003135008000000003136001031370150000000000000003139008000000003142008000000000945003RUS0013003FRA05870150000891641279270025024000026000000000000000000003400467003405020БµАіµ№ °»µєБ°ЅґАѕІёЗ3407015000009200813590013000400000283001M07340020026320150000000000000000436015000000001500000320100100249001N-006015000000000000000331100103312001033180150000000000000003319015000000000000000332001500000000000000004210150000000000000000409008100620183322001133230012332400103430015000000000000000565801500000000000000033250150000000000000000758006162400-042015000000000000000042001500000000000000033290099999999993332001033330010363500200333900800000000335000900000000033510072018131335200200001501000000000000900049ѕ±ЙµБВІѕ Б ѕіА°ЅёЗµЅЅѕ№ ѕВІµВБВІµЅЅѕБВМО ГОВ ї»ОБ0219003RUB0263008000000000266015000000001500000006400800000000006700300000740050000000770150000000000000000080008000000000081002000091004000000610150000000000000000100015Зё±ГВєёЅ*БµАіµ№00990020901940150000000000000000005017Зё±ГВєёЅ°*»Оґјё»°000400210027400400000044008000000000323001803060150000000000000000307006000000030801500000000000000003090150000000000000000310015000000000000000031101500000000000000003120150000000000000000314001003150150000000000000000318015000000000000000032001500000000000000002900150000000000000000327001R015201500000000000000002820030060045015000000000000000004900400000548001R336500100218003PL8010901500000000000000036620053200036630050000036640050000036650050000036660050000036670050000036680050000036690050000036700050000036710050000036720050000036730050000036740050000036750050000036760050000036770050000036780050000036790050000036800050000036810050000036820053056036830050000036840050000036850050000036860050000036870050000036880050000036890050000036900050000036910050000036920050000036930050000034760070000000347700700000003478007000000034790070000000019501500000000000000002230021701820011031700300032930043090043901500000000000000036290010002200800000000011700800000000028700300003490150000000000000000351003000035001500000000000000000370050000000390030020096009000000000364100300005120150000000000000001069005000000418015000000000000000262100430873367001033680010336900113370001002980080000000036400150000000000000000434015000000000000000055401500000000000000004270010042800100431001005260010108700100398001036570033203658003000365900300036600030003827003000019601500000000000000030410010057800100360001003610010108601400000000000000385701500000000000000036420016364300400003644002003645015000000000000000364600103649008000000003650006000000365100600000037040150000000000000003701003CSH30420040000370800403183942005030903944005030873957005030903847008200703013848025БµІµАЅЛј АѕІґ іѕАѕґ° ѕА»°39590080000000038430030030040001D38710020038720020038680150000000000000003841015000000000000000384001500000000000000038390150000000120000003850008000000003923006TCOPER3931017БµАіµ№ І°Бё»МµІёЗ3932010А°Еј°ЅёЅѕІ39620150000000000000000264008000000000070001N3979030БµІµАЅЛј АѕІґ іѕАѕґ° ѕА»°     398000500000398200500000400701500000000000000039850021539990010401301500000000000000038550060000001543002001544002001743002001744002001643002001644002001843002001844002001552001016520010175200101852001002100032000906010200910000945180011391500103913001045170010452000500000452101500000000000000045220020045230010452401020020600933280015000000000000000458401000000000000903003101454900104550002004551002004552002004557001045580020045590150000000000000000956008000000004565008000000003874004DIST4567015000000000000000456801500000000000000045700080000000045720150000000000000004573001L4574001045750010457800103863001O4599009000000000460300104604001046050082018051146220080000000046230020046240020046250150000000000000004626015000000000000000462700200462801000000000004629010000000000046300100000000000463201000000000004634010000000000046360010463701000000000004638010000000000046460080000000046470020046490080000000015360010153700101636001016370010459600110331005003360330001+0328003REF1094015000000000000000458001500000000000000039220030000440003000020701500000000000000002080150000000000000004500019CHIBUTKINA*LYUDMILA0489001O4010008201805120566008201806180255015000000000000000025701500000000000000002590150000000000000004674001001570050000046770020006020010467800200468400300036280150000000000000004701002574694007NO INFO46950240001610000000000000001004696004ѕАЎ»46990025747020020006010010023200105097008000000005098008000000001103003RBT110100300112010030001128005000001228005000001328005000001428005000001124005000121224005000001324005000001424005000001115005000001215005000001315005000001415005000001515005000001615005000001715005000001815005000001140002001240002001340002001440002001139002001239002001339002001439002001144002001244002001344002001444002001146002001246002001346002001446002001145002001245002001345002001445002003721008000000003722008000000003723008000000003724008000000003725008000000003726008000000000700015000000000000000070301500000000000000007060150000000000000000710015000000000000000071301500000000000000007160150000000000000003730015000000000000000373101500000000000000037320150000000000000003733015000000000000000373401500000000000000037350150000000000000002660003000266100300026620030002663003000266400300026650030002163015000000000000000049800104707008ЅёєёИёЅ°510700800000000510100105120001052560010525700195258001952592959.09.09.00.0770001000000000000000000000000000000000000000000000-10                 0000000000000000.5       1.0       00000003360000000188-10       1111111111N000160    003371550       0         111  0     -10                                   0         36        202       -10       -10       030100090000000002910015000000000000000526400500000526600500000510800800000000099100500000527401500000000000000009070102009200007090801020093000050209008201805115285008000000005272003REF5287001C5288008199806015289001C5290002775291001C52940011529501500000000000000052960150000000002767005297008000000005299002025300004111153010150000000000000005306015000000000000000026000105310020408178106140000183005330010µІіµЅМµІЅ°5331013°»µєБ°ЅґАѕІёЗ534600310053260150000000000000005329015000000000000000534400800000000534500800000000534700301153500150000000000000005351003TER53520010096901500000000000000009700150000000000099003997001053590150000000000000005357015000000000000000535801500000000000000054180080000000054210080000000004530030000424015000000000000000296200700000002627015000000000000000543700800000000544500800000000468600900000000046880120000000000000140008000000003838002005424002IB060000100604001040160011401700114503001139680150000000000000003967015000000000000000549400800000000549801500000000000000054990150000000000000005500015000000000000000550101500000000000000055020150000000000000005518001N5563002005564001N5573001155750150000000000000005576015000000000000000027301500000000000000054860082018051254930050000055690080000000055700080000000055150150000000000000000333001C558700800000000559201200000000000056110010561200400005615001056170010562800800000000565401200000000000056550120000000000005656015000000000000000566200900000000056450010564600800000000567600900000000056770090000000005678012030900000000568000800000000568200800000000568301500000000000000055720150000000000000005527006000000008200400000092008000000000093015000000000000000581700800000000581800299581900105714002005715002005716002005717002005718015000000000000000571901500000000000000057200150000000000000005721015000000000000000572201500000000000000057230150000000000000005724015000000000000000572501500000000000000057260040000572700400005744017000000000000000005752003000575300300057540150000000000000005755015000000000000000575601500000000000000057570150000000000000005760015000000000000000576101500000000000000057620150000000000000005763015000000000000000576401500000000000000057650150000000000000005766015000000000000000576701500000000000000057680150000000000000005769015000000000000000577001500000000000000057710150000000000000005772015000000000000000577301500000000000000057740150000000000000005775006000000577601500000000000000057770020057780080000000057850080000000057890010579000105792008000000005805001058060010585200610366858880010588900105892008000000005895015000000000000000589600800000000589901500000000000000059030150000000000000005929007572-028051601500000000000000059340150000000020000005936006TCOPER388600336038850150000000081600005820001L2577001C593100303059670080000000059930580       0  001                  12018051120180711        05995001059970050000059980050000060090080000000060100150000000000000006011002000919001360300010603100106033001T6054001060560030006057015000000000000000605801500000000000000060610080000000060630030006064015000000000000000606600106067008000000006068005000005950015R2018051100002755830080000000060690080000000060730150000000000000006075008000000006079015000000000000000608100800000000608501500000000000000060870080000000060910150000000000000006093008000000006097015000000000000000609900800000000610100600000061020150000000000000006105001061090030006110005000006111008000000006114012000000000000611700800000000611800106120006030870612700106132001061330010613400106138001061390010614000106141001061420010614300500000614400500000614500530900614600530900614701500000000027510061520011615300106156015000000000000000615701500000000000000061590010616501500000000000000061660150000000000000006168001061740150000000000000006175015000000000000000617700106183015000000000000000618401500000000000000061860010619201500000000000000061930150000000000000006195001061990010620000600000062010150000000000000006202015000000000000000620301500000000000000062040010620500106206001162070010620800106209001062100010621101500000000000000062120150000000000000006213001062190060000006221003000622400800000000622501500000000000000062260150000000000000006227004000062390010624000500000624100500000624200300062460150000000000000006255003APP62560010625900200626000105332050                                                  5512020                    27280040000
#2018-05-13 21:00:00.740 INFO  [default task-82] [847e6405-9484-49ca-9a72-0d5f4360334d] com.cetelem.lib.persistence.buffer.BufferUtil: Field id [-42] not found in dicoBuffer -> ignored value
#2018-05-13 21:00:01.004 WARN  [default task-82] [847e6405-9484-49ca-9a72-0d5f4360334d] com.cetelem.instancesvr.tlmq.service.readinstance.BufferInstanceServerReadInstanceOut: DATEVALIDATIONDOSSIER not valid
#2018-05-13 21:00:01.004 WARN  [default task-82] [847e6405-9484-49ca-9a72-0d5f4360334d] com.cetelem.instancesvr.tlmq.service.readinstance.BufferInstanceServerReadInstanceOut: DATECOLLECTEPIECESJUSTIF not valid

        match => { "message" => "%{TIMESTAMP_ISO8601:log-timestamp}(%{SPACE})+%{LOGLEVEL:log-level}(%{SPACE})+\[%{DATA:log-pid}\](%{SPACE})+\[%{DATA:log-key}\](%{SPACE})+%{DATA:log-class}:%{GREEDYDATA:log-message}"}
# Some specific field for each entry
#        add_field => {"log-system"=>"carloan"}
#        add_field => {"log-env"=>"prod"}

    }
}	
else  {
    grok {
# ANY Log Example
#2018-05-13 21:00:00.613 INFO  [default task-82] [847e6405-9484-49ca-9a72-0d5f4360334d] com.cetelem.instancesvr.tlmq.client.InstanceSvrClient: V011227108390001008131000310521006RUXNET0523002CL052800100221008201805110529004PL8C05330150000000015000000401015000000000000000053501500000000027510004350150000000000000000437015000000001500000041501500000000027510004160150000000002751000537001N022700372702810030060284003000022800430901019001M0261003990021101020020600930562003FEM0385009Зё±ГВєёЅ°0386007»Оґјё»°0009007NO INFO00100240001610000000000000001000012004ѕАЎ»00140150000048623476120016001R0017008198112280018008іѕА ѕАµ»00190030750020003CNI00210061111110023008ѕѕѕ ї»ОБ0024007NO INFO0026005000000027006јѕБєІ°00290150000092028698080032008201512010033002470041002PR0043004000000480090000000000098003MAL0387008Зё±ГВєёЅ0388006БµАіµ№011200819790924011400307501220050000001250150000000000000000128008000000000129002000139004000001440090000000000181001M048600110183001P018400820120801019201500000000450000001930150000000015000000197015000000004500000019801500000000000000001990150000000000000000200015000000000000000020101500000000000000004430150000000000000000445015000000000000000020201500000000000000002030150000000000000000204015000000000000000020501500000000000000002060150000000000000000490001N0448001N0337001N0384001N0447001N0449001N024500800000000049400100495001004960010049700100441003320032900140745001007460010074700101500001015010030011502003IN01503003RBT1517005000001524005000121528005000001539002001540002001549002051545002001546002001600001016010030001617005000001624005000001628005000001639002001640002001649002001645002001646002001700001017170050000017240050000017280050000017390020017400020017490020017450020017460020018000010181700500000182400500000182800500000183900200184000200184900200184500200184600200275500100588011NET@MAIL.RU03670041624305900800000000306600800000000307300200307900103080015000000000000000308101500000000000000030830080000000030840010308501500000000000000030870080000000030900080000000030920010309301500000000000000030940150000000000000003096008000000003097001030980150000000000000003100008000000003103008000000003105001031060150000000000000003107015000000000000000310900800000000311000103111015000000000000000311300800000000311600800000000311800103119015000000000000000312001500000000000000031220080000000031230010312401500000000000000031260080000000031290080000000031310010313201500000000000000031330150000000000000003135008000000003136001031370150000000000000003139008000000003142008000000000945003RUS0013003FRA05870150000891641279270025024000026000000000000000000003400467003405020БµАіµ№ °»µєБ°ЅґАѕІёЗ3407015000009200813590013000400000283001M07340020026320150000000000000000436015000000001500000320100100249001N-006015000000000000000331100103312001033180150000000000000003319015000000000000000332001500000000000000004210150000000000000000409008100620183322001133230012332400103430015000000000000000565801500000000000000033250150000000000000000758006162400-042015000000000000000042001500000000000000033290099999999993332001033330010363500200333900800000000335000900000000033510072018131335200200001501000000000000900049ѕ±ЙµБВІѕ Б ѕіА°ЅёЗµЅЅѕ№ ѕВІµВБВІµЅЅѕБВМО ГОВ ї»ОБ0219003RUB0263008000000000266015000000001500000006400800000000006700300000740050000000770150000000000000000080008000000000081002000091004000000610150000000000000000100015Зё±ГВєёЅ*БµАіµ№00990020901940150000000000000000005017Зё±ГВєёЅ°*»Оґјё»°000400210027400400000044008000000000323001803060150000000000000000307006000000030801500000000000000003090150000000000000000310015000000000000000031101500000000000000003120150000000000000000314001003150150000000000000000318015000000000000000032001500000000000000002900150000000000000000327001R015201500000000000000002820030060045015000000000000000004900400000548001R336500100218003PL8010901500000000000000036620053200036630050000036640050000036650050000036660050000036670050000036680050000036690050000036700050000036710050000036720050000036730050000036740050000036750050000036760050000036770050000036780050000036790050000036800050000036810050000036820053056036830050000036840050000036850050000036860050000036870050000036880050000036890050000036900050000036910050000036920050000036930050000034760070000000347700700000003478007000000034790070000000019501500000000000000002230021701820011031700300032930043090043901500000000000000036290010002200800000000011700800000000028700300003490150000000000000000351003000035001500000000000000000370050000000390030020096009000000000364100300005120150000000000000001069005000000418015000000000000000262100430873367001033680010336900113370001002980080000000036400150000000000000000434015000000000000000055401500000000000000004270010042800100431001005260010108700100398001036570033203658003000365900300036600030003827003000019601500000000000000030410010057800100360001003610010108601400000000000000385701500000000000000036420016364300400003644002003645015000000000000000364600103649008000000003650006000000365100600000037040150000000000000003701003CSH30420040000370800403183942005030903944005030873957005030903847008200703013848025БµІµАЅЛј АѕІґ іѕАѕґ° ѕА»°39590080000000038430030030040001D38710020038720020038680150000000000000003841015000000000000000384001500000000000000038390150000000120000003850008000000003923006TCOPER3931017БµАіµ№ І°Бё»МµІёЗ3932010А°Еј°ЅёЅѕІ39620150000000000000000264008000000000070001N3979030БµІµАЅЛј АѕІґ іѕАѕґ° ѕА»°     398000500000398200500000400701500000000000000039850021539990010401301500000000000000038550060000001543002001544002001743002001744002001643002001644002001843002001844002001552001016520010175200101852001002100032000906010200910000945180011391500103913001045170010452000500000452101500000000000000045220020045230010452401020020600933280015000000000000000458401000000000000903003101454900104550002004551002004552002004557001045580020045590150000000000000000956008000000004565008000000003874004DIST4567015000000000000000456801500000000000000045700080000000045720150000000000000004573001L4574001045750010457800103863001O4599009000000000460300104604001046050082018051146220080000000046230020046240020046250150000000000000004626015000000000000000462700200462801000000000004629010000000000046300100000000000463201000000000004634010000000000046360010463701000000000004638010000000000046460080000000046470020046490080000000015360010153700101636001016370010459600110331005003360330001+0328003REF1094015000000000000000458001500000000000000039220030000440003000020701500000000000000002080150000000000000004500019CHIBUTKINA*LYUDMILA0489001O4010008201805120566008201806180255015000000000000000025701500000000000000002590150000000000000004674001001570050000046770020006020010467800200468400300036280150000000000000004701002574694007NO INFO46950240001610000000000000001004696004ѕАЎ»46990025747020020006010010023200105097008000000005098008000000001103003RBT110100300112010030001128005000001228005000001328005000001428005000001124005000121224005000001324005000001424005000001115005000001215005000001315005000001415005000001515005000001615005000001715005000001815005000001140002001240002001340002001440002001139002001239002001339002001439002001144002001244002001344002001444002001146002001246002001346002001446002001145002001245002001345002001445002003721008000000003722008000000003723008000000003724008000000003725008000000003726008000000000700015000000000000000070301500000000000000007060150000000000000000710015000000000000000071301500000000000000007160150000000000000003730015000000000000000373101500000000000000037320150000000000000003733015000000000000000373401500000000000000037350150000000000000002660003000266100300026620030002663003000266400300026650030002163015000000000000000049800104707008ЅёєёИёЅ°510700800000000510100105120001052560010525700195258001952592959.09.09.00.0770001000000000000000000000000000000000000000000000-10                 0000000000000000.5       1.0       00000003360000000188-10       1111111111N000160    003371550       0         111  0     -10                                   0         36        202       -10       -10       030100090000000002910015000000000000000526400500000526600500000510800800000000099100500000527401500000000000000009070102009200007090801020093000050209008201805115285008000000005272003REF5287001C5288008199806015289001C5290002775291001C52940011529501500000000000000052960150000000002767005297008000000005299002025300004111153010150000000000000005306015000000000000000026000105310020408178106140000183005330010µІіµЅМµІЅ°5331013°»µєБ°ЅґАѕІёЗ534600310053260150000000000000005329015000000000000000534400800000000534500800000000534700301153500150000000000000005351003TER53520010096901500000000000000009700150000000000099003997001053590150000000000000005357015000000000000000535801500000000000000054180080000000054210080000000004530030000424015000000000000000296200700000002627015000000000000000543700800000000544500800000000468600900000000046880120000000000000140008000000003838002005424002IB060000100604001040160011401700114503001139680150000000000000003967015000000000000000549400800000000549801500000000000000054990150000000000000005500015000000000000000550101500000000000000055020150000000000000005518001N5563002005564001N5573001155750150000000000000005576015000000000000000027301500000000000000054860082018051254930050000055690080000000055700080000000055150150000000000000000333001C558700800000000559201200000000000056110010561200400005615001056170010562800800000000565401200000000000056550120000000000005656015000000000000000566200900000000056450010564600800000000567600900000000056770090000000005678012030900000000568000800000000568200800000000568301500000000000000055720150000000000000005527006000000008200400000092008000000000093015000000000000000581700800000000581800299581900105714002005715002005716002005717002005718015000000000000000571901500000000000000057200150000000000000005721015000000000000000572201500000000000000057230150000000000000005724015000000000000000572501500000000000000057260040000572700400005744017000000000000000005752003000575300300057540150000000000000005755015000000000000000575601500000000000000057570150000000000000005760015000000000000000576101500000000000000057620150000000000000005763015000000000000000576401500000000000000057650150000000000000005766015000000000000000576701500000000000000057680150000000000000005769015000000000000000577001500000000000000057710150000000000000005772015000000000000000577301500000000000000057740150000000000000005775006000000577601500000000000000057770020057780080000000057850080000000057890010579000105792008000000005805001058060010585200610366858880010588900105892008000000005895015000000000000000589600800000000589901500000000000000059030150000000000000005929007572-028051601500000000000000059340150000000020000005936006TCOPER388600336038850150000000081600005820001L2577001C593100303059670080000000059930580       0  001                  12018051120180711        05995001059970050000059980050000060090080000000060100150000000000000006011002000919001360300010603100106033001T6054001060560030006057015000000000000000605801500000000000000060610080000000060630030006064015000000000000000606600106067008000000006068005000005950015R2018051100002755830080000000060690080000000060730150000000000000006075008000000006079015000000000000000608100800000000608501500000000000000060870080000000060910150000000000000006093008000000006097015000000000000000609900800000000610100600000061020150000000000000006105001061090030006110005000006111008000000006114012000000000000611700800000000611800106120006030870612700106132001061330010613400106138001061390010614000106141001061420010614300500000614400500000614500530900614600530900614701500000000027510061520011615300106156015000000000000000615701500000000000000061590010616501500000000000000061660150000000000000006168001061740150000000000000006175015000000000000000617700106183015000000000000000618401500000000000000061860010619201500000000000000061930150000000000000006195001061990010620000600000062010150000000000000006202015000000000000000620301500000000000000062040010620500106206001162070010620800106209001062100010621101500000000000000062120150000000000000006213001062190060000006221003000622400800000000622501500000000000000062260150000000000000006227004000062390010624000500000624100500000624200300062460150000000000000006255003APP62560010625900200626000105332050                                                  5512020                    27280040000
#2018-05-13 21:00:00.740 INFO  [default task-82] [847e6405-9484-49ca-9a72-0d5f4360334d] com.cetelem.lib.persistence.buffer.BufferUtil: Field id [-42] not found in dicoBuffer -> ignored value
#2018-05-13 21:00:01.004 WARN  [default task-82] [847e6405-9484-49ca-9a72-0d5f4360334d] com.cetelem.instancesvr.tlmq.service.readinstance.BufferInstanceServerReadInstanceOut: DATEVALIDATIONDOSSIER not valid
#2018-05-13 21:00:01.004 WARN  [default task-82] [847e6405-9484-49ca-9a72-0d5f4360334d] com.cetelem.instancesvr.tlmq.service.readinstance.BufferInstanceServerReadInstanceOut: DATECOLLECTEPIECESJUSTIF not valid

        match => { "message" => "%{GREEDYDATA:log-message}"}
        add_field => {"log-warning"=>"default parse"}
		
    }
}	


mutate {
lowercase =>   ["host", "log-system", "log-env"]
}



# Set defult values for fields "system" and "env"

if !("" in [system])  {
	mutate {
		add_field => { "system" => "unk" }
	}
}

if !("" in [env])  {
  if [host] =~ "^sd" {
	mutate {
		add_field => { "env" => "uat" }
	  }
  } else if [host] =~ "^ss" or [host] =~ "^sp" {
	mutate {
		add_field => { "env" => "prod" }
	  }
  } else {
	mutate {
		add_field => { "env" => "unk" }
	  }  
  }
}

}

output {
    elasticsearch {
         # Elastic server IP and port
         hosts => ["MOWW00001743.JV.RU:9200"]
         # index name (cashloan-prod-2017.12.06)
         #index => "cashloan-prod-%{+YYYY.MM.dd}"
		 index => "%{env}-%{host}-%{system}-%{+YYYY.MM.dd}"		 
    }
}
